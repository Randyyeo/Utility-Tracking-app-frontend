{"remainingRequest":"/Users/randallyeo/Desktop/Desktop Items/Y2/Y2S1/WAD2/project/project_deployment/utbuddy_frontend_deploy/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/randallyeo/Desktop/Desktop Items/Y2/Y2S1/WAD2/project/project_deployment/utbuddy_frontend_deploy/src/pages/Bills.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/randallyeo/Desktop/Desktop Items/Y2/Y2S1/WAD2/project/project_deployment/utbuddy_frontend_deploy/src/pages/Bills.vue","mtime":1636168263752},{"path":"/Users/randallyeo/Desktop/Desktop Items/Y2/Y2S1/WAD2/project/project_deployment/utbuddy_frontend_deploy/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/randallyeo/Desktop/Desktop Items/Y2/Y2S1/WAD2/project/project_deployment/utbuddy_frontend_deploy/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/randallyeo/Desktop/Desktop Items/Y2/Y2S1/WAD2/project/project_deployment/utbuddy_frontend_deploy/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/randallyeo/Desktop/Desktop Items/Y2/Y2S1/WAD2/project/project_deployment/utbuddy_frontend_deploy/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IEJhc2VUYWJsZSB9IGZyb20gIkAvY29tcG9uZW50cyI7CmltcG9ydCBBUEkgZnJvbSAiLi4vYXBpL0FQSSI7Cgpjb25zdCB0YWJsZUNvbHVtbnMgPSBbIk5hbWUiLCAiQW1vdW50IiwgIlN0YXR1cyIsICJEYXRlIFBhaWQiXTsKCmV4cG9ydCBkZWZhdWx0IHsKICBjb21wb25lbnRzOiB7CiAgICBCYXNlVGFibGUKICB9LAogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICB0YWJsZTE6IHsKICAgICAgICB0aXRsZTogIkJpbGxzIiwKICAgICAgICBjb2x1bW5zOiBbLi4udGFibGVDb2x1bW5zXSwKICAgICAgICBkYXRhOiBbXQogICAgICB9LAogICAgICBpc0xvYWRpbmc6IGZhbHNlLAogICAgICAKICAgIH07CiAgfSwKICBtZXRob2RzOiB7CiAgICBhc3luYyBnb1RvKGl0ZW0pIHsKICAgICAgY29uc3QgdG9rZW4gPSB3aW5kb3cubG9jYWxTdG9yYWdlLmdldEl0ZW0oInRva2VuIik7CiAgICAgIGl0ZW0ucGFpZCA9IHRydWU7CiAgICAgIHZhciBjb3VudCA9IDA7CiAgICAgIHZhciBkYXRhID0gdGhpcy50YWJsZTEuZGF0YS5zbGljZSgpLnJldmVyc2UoKTsKICAgICAgY29uc3QgZGF0ZSA9IG5ldyBEYXRlKCk7CiAgICAgIHZhciBzdHJpbmdfZGF0ZSA9IFN0cmluZyhkYXRlKS5zdWJzdHJpbmcoNCwgMjQpOwogICAgICBmb3IgKHZhciBhcnIgb2YgZGF0YSkgewogICAgICAgIGlmIChhcnIubmFtZSA9PSBpdGVtLm5hbWUpIHsKICAgICAgICAgIGFyci5kYXRlID0gc3RyaW5nX2RhdGU7CiAgICAgICAgICBicmVhazsKICAgICAgICB9CiAgICAgICAgY291bnQgKz0gMTsKICAgICAgfQoKICAgICAgCiAgICAgIAogICAgICB0cnkgewogICAgICAgIGNvbnN0IHJlc3VsdCA9IEFQSS5zdHJpcGV1cGRhdGUoeyBjb3VudCwgZGF0ZTogc3RyaW5nX2RhdGUgfSwgdG9rZW4pOwogICAgICB9IGNhdGNoIChlcnJvcikgewogICAgICAgIGNvbnNvbGUubG9nKGVycm9yKTsKICAgICAgfQoKICAgICAgd2luZG93Lm9wZW4oaXRlbS5saW5rKTsKICAgIH0KICB9LAogIGFzeW5jIG1vdW50ZWQoKSB7CiAgICBjb25zdCB0b2tlbiA9IHdpbmRvdy5sb2NhbFN0b3JhZ2UuZ2V0SXRlbSgidG9rZW4iKTsKICAgIAogICAgdHJ5IHsKICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgQVBJLnN0cmlwZSh0b2tlbik7CiAgICAgIHRoaXMuaXNMb2FkaW5nID0gdHJ1ZTsKCiAgICAgIAogICAgICB2YXIgZGF0ZSA9IG5ldyBEYXRlKCkKICAgICAgdmFyIG1vbnRoID0gZGF0ZS5nZXRNb250aCgpCiAgICAgIGZvciAodmFyIGluZGV4IGluIHJlc3VsdC5kYXRhLmV4dHJhY3RlZCl7CiAgICAgICAgaWYgKGluZGV4ID49IG1vbnRoKXsKICAgICAgICAgIGJyZWFrCiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHZhciBwcmljZSA9IFN0cmluZyhyZXN1bHQuZGF0YS5leHRyYWN0ZWRbaW5kZXhdLnByaWNlKTsKICAgICAgICAgIHByaWNlID0gIiQiICsgcHJpY2Uuc3Vic3RyaW5nKDAscHJpY2UubGVuZ3RoLTIpICsgIi4iICsgcHJpY2Uuc3Vic3RyKHByaWNlLmxlbmd0aC0yLCAyKQogICAgICAgICAgcmVzdWx0LmRhdGEuZXh0cmFjdGVkW2luZGV4XS5wcmljZSA9IHByaWNlCiAgICAgICAgICB0aGlzLnRhYmxlMS5kYXRhLnB1c2gocmVzdWx0LmRhdGEuZXh0cmFjdGVkW2luZGV4XSkKICAgICAgICB9CiAgICAgIH0KICAgICAgY29uc29sZS5sb2codGhpcy50YWJsZTEuZGF0YSkKICAgICAgdGhpcy50YWJsZTEuZGF0YSA9IHRoaXMudGFibGUxLmRhdGEucmV2ZXJzZSgpCiAgICB9IGNhdGNoIChlcnJvcikgewogICAgICBjb25zb2xlLmxvZyhlcnJvcikKICAgIH0KICB9Cn07Cg=="},{"version":3,"sources":["Bills.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;AAwBA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;AAIA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Bills.vue","sourceRoot":"src/pages","sourcesContent":["<template>\n  <div class=\"row\">\n    <div class=\"col-12\">\n      <card :title=\"table1.title\" class=\"relative\">\n        <div class=\"table\">\n          <!-- <loading :loaded=\"isLoading\"/> -->\n          <div v-if=\"!isLoading\" class=\"loader\">\n            <vue-simple-spinner message=\"Please wait while we retrieve your bills\"></vue-simple-spinner>\n          </div>\n          <base-table\n            :data=\"table1.data\"\n            :columns=\"table1.columns\"\n            thead-classes=\"text-primary\"\n            type=\"hover\"\n            @bills=\"goTo\"\n          >\n          </base-table>\n        </div>\n      </card>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { BaseTable } from \"@/components\";\nimport API from \"../api/API\";\n\nconst tableColumns = [\"Name\", \"Amount\", \"Status\", \"Date Paid\"];\n\nexport default {\n  components: {\n    BaseTable\n  },\n  data() {\n    return {\n      table1: {\n        title: \"Bills\",\n        columns: [...tableColumns],\n        data: []\n      },\n      isLoading: false,\n      \n    };\n  },\n  methods: {\n    async goTo(item) {\n      const token = window.localStorage.getItem(\"token\");\n      item.paid = true;\n      var count = 0;\n      var data = this.table1.data.slice().reverse();\n      const date = new Date();\n      var string_date = String(date).substring(4, 24);\n      for (var arr of data) {\n        if (arr.name == item.name) {\n          arr.date = string_date;\n          break;\n        }\n        count += 1;\n      }\n\n      \n      \n      try {\n        const result = API.stripeupdate({ count, date: string_date }, token);\n      } catch (error) {\n        console.log(error);\n      }\n\n      window.open(item.link);\n    }\n  },\n  async mounted() {\n    const token = window.localStorage.getItem(\"token\");\n    \n    try {\n      const result = await API.stripe(token);\n      this.isLoading = true;\n\n      \n      var date = new Date()\n      var month = date.getMonth()\n      for (var index in result.data.extracted){\n        if (index >= month){\n          break\n        } else {\n          var price = String(result.data.extracted[index].price);\n          price = \"$\" + price.substring(0,price.length-2) + \".\" + price.substr(price.length-2, 2)\n          result.data.extracted[index].price = price\n          this.table1.data.push(result.data.extracted[index])\n        }\n      }\n      console.log(this.table1.data)\n      this.table1.data = this.table1.data.reverse()\n    } catch (error) {\n      console.log(error)\n    }\n  }\n};\n</script>\n\n<style lang=\"scss\" scoped>\nbutton {\n  border-radius: 10px;\n  text-align: center;\n  margin: auto;\n}\n.relative{\n  position: relative;\n}\n.loader{\n  position: absolute;\n  top: 150%;\n  left: 37%;\n}\n</style>\n"]}]}